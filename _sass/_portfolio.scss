/* @file _portfolio.scss
 * @brief Styles for the portfolio collection
 * @Copyright (c) 2016 Taylor Siviter
 */

/* Portfolio-page base layout
 */

// Slide structure
.slide {
  min-height: 75%;
  padding-top: $spacing-unit;
  position: relative;
  
  .portfolio-bg {
    z-index: -1;  
    top: 0; right: 0;
    bottom: 0; left: 0;
    position: absolute;
    background: $bg-colour;
    background-image: url('/images/textures/sayagata.png');
  }
  
  .portfolio-text { @extend %vertical-rhythm; }
  
  .portfolio-img {
    @extend %vertical-rhythm;
    height: 200px;
    border-bottom: 3px solid $brand-colour;
    overflow: hidden;
    > img {
      width: 100%;
      height: 100%;
      margin: auto;
      display: block;
    }
  }
  
  // First introduction slide
  &:first-child {
    .portfolio-bg { background: $bg-colour; }
    .portfolio-img {
      height: auto;
      border: none;
      > img {
        width: 256px;
        padding-bottom: $spacing-unit;
        @include media-query-min($tablet) { width: 448px; }
      }
    }
  }
  
  // Even slides
  &:nth-child(2n) {
    .portfolio-bg {
      border-top: 3px solid $brand-colour;
      border-bottom: 3px solid $brand-colour;
      background: $brand-colour-light;
      background-image: url('/images/textures/asanoha.png');
    }
  }
}

// Parallax effect for suitable width screens
@include media-query-min($tablet) {
  @include parallax('#content-column', '.parallax', 100%, 100%) {
    
    .slide {
      min-height: 100%;
      padding: 0;
      background: $brand-colour-dark;
      background-image: url('/images/textures/t-square.png');
      
      // General content structure
      .portfolio-content {
        z-index: 2;
        position: absolute;
        .portfolio-text, .portfolio-img {
          width: 100%;
          position: absolute;
        }
      }
      
      // First introduction slide
      &:first-child {
        .post-header {
          position: absolute;
          top: $spacing-unit;
        }
        
        .portfolio-text {
          height: 40%;
          top: 20%;
          @include parallax-transform(0.3);
          @include transform-origin(50% 40%);
        }
        
        .portfolio-img {
          height: 50%;
          top: 50%;
          position: absolute;
          @include parallax-transform(0.4);
          @include transform-origin(50% 0);
        }
      }
      
      // Remaining slides
      &:not(:first-child) {
        .portfolio-img {
          z-index: 3;
          top: 0;
          height: 40%;
          border-top: 3px solid $brand-colour;
          @include parallax-transform(0.2);
          @include transform-origin(50% 125%);
        }
        
        .portfolio-text {
          z-index: 4;
          height: 55%;
          top: 45%;
          background-color: #fff;
          border-top: 3px solid $brand-colour;
          @include border-radius(9px 9px 0 0);
          background: #fff;
          &:hover { border-top: 3px solid $hover-colour; }
          @include transition(border 1s);
          @include parallax-transform(0.4);
          @include transform-origin(50% 10%);
        }
      }
      
      // Even slides
      &:nth-child(2n) {
        z-index: 1;
        .portfolio-bg { @include parallax-transform(0.1); }
        .portfolio-text { background-image: url('/images/textures/asanoha.png'); }
      }
      
      // Odd slides
      &:nth-child(2n+1):not(:first-child) {
        .portfolio-text { background-image: url('/images/textures/sayagata.png'); }
      }
      
      // End slide
      &:last-child { min-height: 100%; }
    }
    
  }
}


/* Portfolio slide navigation
 */

#portfolio-nav {
  z-index: 100;
  right: 0;
  bottom: 9px;
  position: fixed;
  text-align: right;
  text-transform: capitalize;
  background: $brand-colour-dark;
  @include border-radius(9px 0 0 9px);
  @include opacity(0.85);
  
  .slide-link {
    line-height: 31px;
    height: 31px;
    padding: 0 10px;
    display: block;
    color: $brand-colour-light;
    border-top: 3px solid $brand-colour;
    &:hover {
      line-height: 45px;
      height: 45px;
      color: $hover-colour;
      background-color: $brand-colour;
      border-top: 3px solid $hover-colour;
    }
    &:first-child { @include border-radius(9px 0 0 0); }
    &:last-child { @include border-radius(0 0 0 9px); }
    @include transition(line-height 0.25s ease-out, background-color 1s, height 0.5s,
                        color 0.5s, border 1s);
    @include media-query($phone) { display: none; }
  }
}


/* Portfolio content
 */

.meta-title { font-size: 2em; }
.meta-more {
  font-size: $small-font-size;
  color: $grey-colour;
}

.portfolio-content {
  width: 100%;
  height: 100%;
  .portfolio-meta {
    padding: 0 $spacing-unit / 2 8px;
    margin-bottom: $spacing-unit / 2;
    color: $brand-colour-light;
    background-color: $brand-colour-dark;
    @include border-radius(9px 9px 0 0);
    display: block;
    .meta-title { 
      padding: 3px 0;
      display: block;
    }
    &:hover {
      background-color: $brand-colour;
      .meta-title { color: $hover-colour; }
      .meta-more { color: $brand-colour-light; }
    }
    &, * { @include transition(background-color 1s, color 1s); }
    @include media-query($phone) { border-top: 3px solid $brand-colour; }
  }
  
  .portfolio-desc { padding: 0 $spacing-unit / 2; }
}